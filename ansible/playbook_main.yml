- hosts: all

  pre_tasks:
    - include_vars:
        file: passwords.yml
        name: passwords

    - import_tasks: tasks/ubuntu_apt.yml
    - import_tasks: tasks/basic_setup.yml

  roles:
    - role: users
      vars:
        users:
          - { name: "clang", password: "{{ passwords.clang }}" }
          - { name: "velin", password: "{{ passwords.velin }}" }
          - { name: "rsync", password: "{{ passwords.rsync }}" }

    - role: ssh
      vars:
        ssh_pub_files: [ 'ssh_key_clang_home.opub' ]

    - role: git-tools
      vars:
        git_aliases: on
        git_rerere: on
        git_editor_nano: on
        git_prompt: on
        git_archivestotext: off
        git_docxtotext: off
        git_pdftotext: off
        git_xlsxtotext: off
        git_user_name: "Christian Lang"
        git_user_email: "lang.chr86@gmail.com"

    - role: bash
    - role: tmux

    - role: wol
      vars:
        device: "ens130"

    - role: share
      vars:
        share_source: "/mnt/subvolumes/share-main"

    - role: dockerio
    - role: jdownloader
      vars:
        jdownloader_download_folder: "/mnt/subvolumes/share-main/Downloads"
        myjd_password: "{{ passwords.myjd }}"

    - role: cs16server
    - role: csgoserver
