- sensor:
    - name: "Battery Power Charging"
      unit_of_measurement: W
      device_class: power
      state: "{{ max(0, 0 - states('sensor.solarnet_power_battery') | float(default=0)) }}"
    - name: "Battery Power Discharging"
      unit_of_measurement: W
      device_class: power
      state: "{{ max(0, states('sensor.solarnet_power_battery') | float(default=0)) }}"
    - name: "Power Photovoltaics"
      unit_of_measurement: W
      device_class: power
      state: "{{ states('sensor.solarnet_power_photovoltaics') | float(default=0) }}"
    - name: "WPL17ICS Wärmemenge Heizen Summe"
      unit_of_measurement: kWh
      device_class: energy
      state: "{{ states('sensor.wpl17ics_warmemenge_heizen_summe_kwh') | float + states('sensor.wpl17ics_warmemenge_heizen_summe_mwh') | float * 1000.0 }}"
    - name: "WPL17ICS Wärmemenge Warmwasser Summe"
      unit_of_measurement: kWh
      device_class: energy
      state: "{{ states('sensor.wpl17ics_warmemenge_warmwasser_summe_kwh') | float + states('sensor.wpl17ics_warmemenge_warmwasser_summe_mwh') | float * 1000.0 }}"
    - name: "WPL17ICS Leistungsaufnahme Heizen Summe"
      unit_of_measurement: kWh
      device_class: energy
      state: "{{ states('sensor.wpl17ics_leistungsaufnahme_heizen_summe_kwh') | float + states('sensor.wpl17ics_leistungsaufnahme_heizen_summe_mwh') | float * 1000.0 }}"
    - name: "WPL17ICS Leistungsaufnahme Warmwasser Summe"
      unit_of_measurement: kWh
      device_class: energy
      state: "{{ states('sensor.wpl17ics_leistungsaufnahme_warmwasser_summe_kwh') | float + states('sensor.wpl17ics_leistungsaufnahme_warmwasser_summe_mwh') | float * 1000.0 }}"
